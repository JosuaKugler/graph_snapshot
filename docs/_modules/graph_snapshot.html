
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>graph_snapshot &#8212; graph_snapshot  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for graph_snapshot</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">graph_snapshot</span>
<span class="sd">==================</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">from</span> <span class="nn">networkx.drawing.nx_agraph</span> <span class="kn">import</span> <span class="n">write_dot</span>
<span class="kn">import</span> <span class="nn">pygraphviz</span>
<span class="kn">import</span> <span class="nn">dot2tex</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">default_graph_list</span> <span class="o">=</span> <span class="p">[]</span>

<div class="viewcode-block" id="snapshot"><a class="viewcode-back" href="../reference.html#graph_snapshot.snapshot">[docs]</a><span class="k">def</span> <span class="nf">snapshot</span><span class="p">(</span><span class="n">G</span><span class="p">,</span><span class="n">graph_list</span><span class="o">=</span><span class="n">default_graph_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Takes a given graph G and appends it to graph_list.</span>
<span class="sd">    If no graph_list is given, it is appended to a global list.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    G</span>
<span class="sd">        The graph to be appended to graph_list.</span>

<span class="sd">    graph_list</span>
<span class="sd">        The list where graphs are saved.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">H</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
    <span class="n">graph_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">H</span><span class="p">)</span></div>

<span class="k">def</span> <span class="nf">setNodesToCircleShape</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    set node shape to circle</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    G</span>
<span class="sd">        the graph whose nodes we talk about</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">():</span>
        <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s1">&#39;shape&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;circle&quot;</span>

<span class="k">def</span> <span class="nf">setLenAsLabel</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    set len attribute of edges as label</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    G</span>
<span class="sd">        the graph whose nodes we talk about</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">edge</span><span class="p">][</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">edge</span><span class="p">][</span><span class="s1">&#39;len&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;no len given&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="compile"><a class="viewcode-back" href="../reference.html#graph_snapshot.compile">[docs]</a><span class="k">def</span> <span class="nf">compile</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="n">graph_list</span><span class="o">=</span><span class="n">default_graph_list</span><span class="p">,</span> <span class="n">tikzedgelabels</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">lenAsLabel</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">scale_total</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">scale_edge_lengths</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">texmode</span> <span class="o">=</span> <span class="s2">&quot;math&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates graph&lt;i&gt;.dot files containing the dot code for the graph in the snapshot with index &lt;i&gt; and graph&lt;i&gt;.tex files containing the tikz code for the graph in the snapshot with index &lt;i&gt;. The .dot files are only there because the dot code is created anyway and it can be useful for debugging to see the dot code.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    dir</span>
<span class="sd">        Directory where all output files are placed. If it doesn&#39;t exist, it is created.</span>
<span class="sd">        If it already exists, all further graph&lt;i&gt;.dot or graph&lt;i&gt;.tex files in it are deleted.</span>

<span class="sd">    graph_list</span>
<span class="sd">        The list of snapshots to be processed and converted into tikz code. Default is to use `default_graph_list` which is also default for the snapshot function. If in snapshot a `graph_list` is specified, this list must be specified in compile aswell. For detailed instruction how to use this, look at the tutorial in the documentation.</span>
<span class="sd">    </span>
<span class="sd">    tikzedgelabels</span>
<span class="sd">        Defaults to True, meaning that the tikz edge label placement algorithm is used to position the labels.</span>
<span class="sd">        If set to False, the graphviz algorithm is used instead. Just try out what gives better performance for your graph.</span>

<span class="sd">    lenAsLabel</span>
<span class="sd">        Defaults to False. If set to True, the &#39;len&#39; attribute of the graph edges will be used as label in the final tikz graph.</span>
<span class="sd">        Warning: This will override any &#39;label&#39; attribute given to the graph edge.</span>
<span class="sd">    </span>
<span class="sd">    scale_total</span>
<span class="sd">        Default is 1, resulting in no scaling at all. If the tikz output size is inappropriate in your document, you can use this factor to scale the whole tikzpicture.</span>
<span class="sd">    </span>
<span class="sd">    scale_edge_lengths</span>
<span class="sd">        Default is 1, resulting in no scaling at all. If the ratio of edge length to node size is not appropriate, you can use this factor to scale the edge lengths only. This will result in a differently sized picture, however you can scale the total size of the picture with `scale_total`.</span>
<span class="sd">    </span>
<span class="sd">    texmode</span>
<span class="sd">        Defaults to &#39;math&#39;, meaning that the text in your node/edge labels will be processed as latex math.</span>
<span class="sd">        You can alternatively set it to &#39;verbatim&#39; or &#39;raw&#39;, resulting in the corresponding processing.</span>

<span class="sd">    **kwargs</span>
<span class="sd">        The keywords and arguments are taken from http://www.graphviz.org/doc/info/attrs.html</span>
<span class="sd">        and have exactly the same meaning.</span>
<span class="sd">        However, only `overlap`,  `sep`, `splines` and `orientation` have shown an effect in this function, so other keywords are not permitted.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parentpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm -f graph*.tex&quot;</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm -f graph*.dot&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">graph</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">graph_list</span><span class="p">):</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;graph&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.dot&#39;</span>
        <span class="n">filenametikz</span> <span class="o">=</span> <span class="s1">&#39;graph&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.tex&#39;</span> 
        
        <span class="k">if</span> <span class="n">lenAsLabel</span><span class="p">:</span>
            <span class="n">setLenAsLabel</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
        <span class="c1">#factor 0.5 turned out to look nice on beamer presentations</span>
        <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">edge</span><span class="p">][</span><span class="s1">&#39;len&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">scale_edge_lengths</span> <span class="o">*</span> <span class="n">graph</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">edge</span><span class="p">][</span><span class="s1">&#39;len&#39;</span><span class="p">]</span>
        <span class="n">setNodesToCircleShape</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
        <span class="n">write_dot</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
            <span class="n">graphoptions</span> <span class="o">=</span> <span class="s2">&quot;      graph   [  &quot;</span>
            <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">arg</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;overlap&quot;</span><span class="p">,</span> <span class="s2">&quot;splines&quot;</span><span class="p">,</span> <span class="s2">&quot;sep&quot;</span><span class="p">,</span> <span class="s2">&quot;orientation&quot;</span><span class="p">]:</span>
                    <span class="n">graphoptions</span> <span class="o">+=</span> <span class="n">arg</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span>  <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown keywordargument </span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
            <span class="n">graphoptions</span> <span class="o">=</span> <span class="n">graphoptions</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">graphoptions</span> <span class="o">+=</span> <span class="s2">&quot;];</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">graphoptions</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">dotgraph</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filenametikz</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">texmode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;math&quot;</span><span class="p">,</span> <span class="s2">&quot;verbatim&quot;</span><span class="p">,</span> <span class="s2">&quot;raw&quot;</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;texmode was set to </span><span class="si">{</span><span class="n">texmode</span><span class="si">}</span><span class="s2">, but can only be set to &#39;math&#39;, &#39;verbatim&#39; or &#39;raw&#39;.&quot;</span><span class="p">)</span>
            <span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;format&#39;</span><span class="p">:</span><span class="s2">&quot;tikz&quot;</span><span class="p">,</span> <span class="s1">&#39;texmode&#39;</span><span class="p">:</span><span class="n">texmode</span><span class="p">,</span> <span class="s1">&#39;output&#39;</span><span class="p">:</span><span class="n">filenametikz</span><span class="p">,</span> <span class="s1">&#39;graphstyle&#39;</span><span class="p">:</span><span class="s2">&quot;scale=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">scale_total</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;, auto, every node/.style={transform shape}&quot;</span><span class="p">,</span> <span class="s1">&#39;tikzedgelabels&#39;</span><span class="p">:</span><span class="n">tikzedgelabels</span><span class="p">,</span> <span class="s1">&#39;prog&#39;</span><span class="p">:</span><span class="s2">&quot;neato&quot;</span><span class="p">,</span> <span class="s1">&#39;figonly&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;force&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">}</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">dot2tex</span><span class="o">.</span><span class="n">dot2tex</span><span class="p">(</span><span class="n">dotgraph</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">))</span>
        
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">parentpath</span><span class="p">)</span></div>

<div class="viewcode-block" id="beamer_slide"><a class="viewcode-back" href="../reference.html#graph_snapshot.beamer_slide">[docs]</a><span class="k">def</span> <span class="nf">beamer_slide</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">caption_list</span><span class="o">=</span><span class="p">[]):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a .tex file that can be included as a frame in a beamer presentation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ------------</span>
<span class="sd">    directory</span>
<span class="sd">        Directory where &#39;graph&lt;i&gt;.tex&#39; files are located.</span>
<span class="sd">        graphn.tex is included in the frame, if all files graphi.tex with 0 &lt; i &lt; n are in `directory`.</span>
<span class="sd">    </span>
<span class="sd">    title</span>
<span class="sd">        The frametitle of the returned frame.</span>
<span class="sd">    </span>
<span class="sd">    path</span>
<span class="sd">        The name of the .tex file that is to be modified.</span>

<span class="sd">    caption_list</span>
<span class="sd">        The i-th caption gets assigned to the i-th snapshot.</span>
<span class="sd">        If there are too many captions they are simply ignored.</span>
<span class="sd">        If there are not enough captions, the last snapshots get no caption.</span>
<span class="sd">        </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">caption_iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">caption_list</span><span class="p">)</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
    <span class="n">texfiles</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">next_helper</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">while</span> <span class="n">next_helper</span><span class="p">:</span>
        <span class="n">nextfile</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;graph</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">.tex&quot;</span>
        <span class="k">if</span> <span class="n">nextfile</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
            <span class="n">texfiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nextfile</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">next_helper</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">slidelines</span> <span class="o">=</span> <span class="p">[</span><span class="sa">r</span><span class="s2">&quot;\begin</span><span class="si">{frame}</span><span class="s2">&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
        <span class="n">slidelines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\frametitle{&quot;</span> <span class="o">+</span> <span class="n">title</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;}&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">texfile</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">texfiles</span><span class="p">):</span>
        <span class="n">filerawname</span> <span class="o">=</span> <span class="n">texfile</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">filenamewithdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">filerawname</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">current_caption</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">caption_iterator</span><span class="p">)</span>
            <span class="n">line</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\only&lt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;&gt;{\begin</span><span class="si">{figure}</span><span class="s2"> \input{&quot;</span> <span class="o">+</span> <span class="n">filenamewithdir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;.tex} \caption{&quot;</span> <span class="o">+</span> <span class="n">current_caption</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;} \end</span><span class="si">{figure}</span><span class="s2">}&quot;</span>
        <span class="k">except</span><span class="p">:</span> 
            <span class="n">line</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\only&lt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;&gt;{\begin</span><span class="si">{figure}</span><span class="s2"> \input{&quot;</span> <span class="o">+</span> <span class="n">filenamewithdir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;.tex} \end</span><span class="si">{figure}</span><span class="s2">}&quot;</span>
        <span class="n">slidelines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="n">slidelines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\end</span><span class="si">{frame}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">slidecode</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">slidelines</span><span class="p">:</span>
        <span class="n">slidecode</span> <span class="o">+=</span> <span class="n">line</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">slidecode</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">slidecode</span></div>

<div class="viewcode-block" id="latex_document"><a class="viewcode-back" href="../reference.html#graph_snapshot.latex_document">[docs]</a><span class="k">def</span> <span class="nf">latex_document</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">caption_list</span><span class="o">=</span><span class="p">[]):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a compilable .tex file with all snapshots as figures.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ------------</span>
<span class="sd">    directory</span>
<span class="sd">        Directory where &#39;graph&lt;i&gt;.tex&#39; files are located.</span>
<span class="sd">        graphn.tex is included in the frame, if all files graphi.tex with 0 &lt; i &lt; n are in `directory`.</span>
<span class="sd">    </span>
<span class="sd">    title</span>
<span class="sd">        The title of the document.</span>

<span class="sd">    path</span>
<span class="sd">        The name of the .tex file that is to be modified.</span>
<span class="sd">    </span>
<span class="sd">    caption_list</span>
<span class="sd">        The i-th caption gets assigned to the i-th snapshot.</span>
<span class="sd">        If there are too many captions they are simply ignored.</span>
<span class="sd">        If there are not enough captions, the last snapshots get no caption.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">caption_iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">caption_list</span><span class="p">)</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
    <span class="n">texfiles</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">next_helper</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">while</span> <span class="n">next_helper</span><span class="p">:</span>
        <span class="n">nextfile</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;graph</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">.tex&quot;</span>
        <span class="k">if</span> <span class="n">nextfile</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
            <span class="n">texfiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nextfile</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">next_helper</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">latex_doc_lines</span> <span class="o">=</span> <span class="p">[</span><span class="sa">r</span><span class="s2">&quot;\documentclass</span><span class="si">{article}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\usepackage</span><span class="si">{tikz}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\usetikzlibrary{decorations,arrows,shapes}&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\usepackage</span><span class="si">{amsmath}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\usepackage</span><span class="si">{float}</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\begin</span><span class="si">{document}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
        <span class="n">latex_doc_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\section{&quot;</span> <span class="o">+</span> <span class="n">title</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;}&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">texfile</span> <span class="ow">in</span> <span class="n">texfiles</span><span class="p">:</span>
        <span class="n">filerawname</span> <span class="o">=</span> <span class="n">texfile</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">filenamewithdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">filerawname</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">current_caption</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">caption_iterator</span><span class="p">)</span>
            <span class="n">line</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\begin</span><span class="si">{figure}</span><span class="s2">[H] \input{&quot;</span> <span class="o">+</span> <span class="n">filenamewithdir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;.tex} \caption{&quot;</span> <span class="o">+</span> <span class="n">current_caption</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;} \end</span><span class="si">{figure}</span><span class="s2">&quot;</span>
        <span class="k">except</span><span class="p">:</span> 
            <span class="n">line</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\begin</span><span class="si">{figure}</span><span class="s2">[H] \input{&quot;</span> <span class="o">+</span> <span class="n">filenamewithdir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;.tex} \end</span><span class="si">{figure}</span><span class="s2">&quot;</span>
        <span class="n">latex_doc_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="n">latex_doc_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">latex_doc_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\end</span><span class="si">{document}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">latex_doc_code</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">latex_doc_lines</span><span class="p">:</span>
        <span class="n">latex_doc_code</span> <span class="o">+=</span> <span class="n">line</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">latex_doc_code</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">latex_doc_code</span></div>

<div class="viewcode-block" id="standalone"><a class="viewcode-back" href="../reference.html#graph_snapshot.standalone">[docs]</a><span class="k">def</span> <span class="nf">standalone</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a compilable .tex file for each image generated containing the image</span>

<span class="sd">    Parameters </span>
<span class="sd">    ------------</span>
<span class="sd">    directory</span>
<span class="sd">        Directory where &#39;graph&lt;i&gt;.tex&#39; files are located.</span>
<span class="sd">        graphn.tex is included in the frame, if all files graphi.tex with 0 &lt; i &lt; n are in `directory`.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
    <span class="n">texfiles</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">next_helper</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">while</span> <span class="n">next_helper</span><span class="p">:</span>
        <span class="n">nextfile</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;graph</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">.tex&quot;</span>
        <span class="k">if</span> <span class="n">nextfile</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
            <span class="n">texfiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nextfile</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">next_helper</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="c1">#latex_doc_lines = [r&quot;\documentclass{standalone}&quot;, r&quot;\usepackage{tikz}&quot;, r&quot;\usetikzlibrary{decorations,arrows,shapes}&quot;, &quot;\n&quot;, r&quot;\begin{document}&quot;]</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">texfile</span> <span class="ow">in</span> <span class="n">texfiles</span><span class="p">:</span>
        <span class="n">filerawname</span> <span class="o">=</span> <span class="n">texfile</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">latex_document</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;&quot;&quot;\documentclass</span><span class="si">{standalone}</span><span class="s2"></span>
<span class="s2">\usepackage</span><span class="si">{tikz}</span><span class="s2"></span>
<span class="s2">\usetikzlibrary{decorations,arrows,shapes}</span>
<span class="s2">\begin</span><span class="si">{document}</span><span class="s2"></span>
<span class="s2">\input{&quot;&quot;&quot;</span> <span class="o">+</span> <span class="n">filerawname</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;&quot;&quot;.tex}</span>
<span class="s2">\end</span><span class="si">{document}</span><span class="s2">&quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filerawname</span> <span class="o">+</span> <span class="s2">&quot;stda.tex&quot;</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">latex_document</span><span class="p">)</span>
        
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pdflatex </span><span class="si">{</span><span class="n">filerawname</span><span class="si">}</span><span class="s2">stda.tex&quot;</span><span class="p">)</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">graph_snapshot</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Nico Haaf, Josua Kugler.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
    </div>

    

    
  </body>
</html>